Exploring the most harmful and economically damaging severe weather events. 
========

## Synopsis 

In this report we aim to investigate which severe weather events cause the most damage to the population and economically across the United States, using the U.S. National Oceanic and Atmospheric Administration's storm database. From the records covering the period 1996-2011 we found that ......................................

## Data Processing

First we load any required libraries in advance and set caching for knitr as default.  
```{r setup, message=FALSE}
library(knitr)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
opts_chunk$set(cache=TRUE)
```

Downloading and reading the storm data  

The data is a comma-separated-value file, compressed via the bzip2 algorithm, the first line is column headers and NA values are coded as blank fields. The read.csv function unzips the file and processes the column headers with its default arguments.  

```{r download, cache=TRUE}
url = "http://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
download.file(url, "stormData.csv.bz2")
stormData <- read.csv("stormData.csv.bz2", na.strings = "")
```

We then tidy the dataset, changing the variable names to tidy names (lower case, no non-alphanumeric characters etc.) and change the date variables to 
Changing date to a POSIXct date object.
```{r processing data}
data <- stormData
data$BGN_DATE <- as.Date(data$BGN_DATE, format="%m/%d/%Y %H:%M:%S")
data$END_DATE <- as.Date(data$END_DATE, format = "%m/%d/%Y %H:%M:%S")

data <- mutate(data, year=year(BGN_DATE))
# Tidying the names, so lower case and no "_/ /."
names(data) <- tolower(names(data))
names(data) <- gsub("_", "x", names(data))
```